<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gaoxi.mapper.UserOfPetsMapper">
    <!--
     1.想一想前面一对一是如何实现的
     2.配置/实现public UserOfPets getUserById(Integer id)
     3.思路：
       (1).先通过user_id查询得到User信息
       (2).再根据user_id查询对应的Pet信息，并映射到User的pets属性中
     -->
    <resultMap id="UserResultMap" type="UserOfPets">
        <id property="id" column="id"/>
        <result property="name" column="name"/>
        <!-- 因为pets属性是一个集合，这里需要使用collection标签来映射 -->
        <!--
         1.ofType="Pet"指定返回的集合中存放的数据类型是Pet
         2.collection表示这个属性是一个集合
         3.property="pets" 是返回的UserOfPets对象的属性
         4.column="id"是SELECT * FROM `mybatis_user` WHERE `id` = #{id}返回的字段-id对应的值
         -->
        <collection property="pets" column="id" ofType="Pet"
                    select="com.gaoxi.mapper.PetMapper.getPetByUserId"/>
    </resultMap>
    <select id="getUserById" parameterType="Integer" resultMap="UserResultMap">
        SELECT * FROM `mybatis_user` WHERE `id` = #{id}
    </select>
</mapper>